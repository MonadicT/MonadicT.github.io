<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta content="text/html; charset=UTF-8" http-equiv="content-type" /><meta name="description" /><meta content="tip, emacs" name="keywords" /><meta content="Praki Prakash" name="author" /><link href="/images/favicon.ico" rel="icon" type="image/x-icon" /><link href="/images/favicon.ico" rel="shortcut icon" type="image/x-icon" /><link href="/default.css" rel="stylesheet" type="text/css" /><link href="/rss-feed" rel="alternate" title="MonadicT" type="application/rss+xml" /><link href="http://MonadicT.github.io/2014/03/08/safeguarding-secrets-with-gnupg/" rel="canonical" /><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><title>Safeguarding Secrets with GnuPG</title></head><div id="wrap"><body><div id="header"><form action="http://www.google.com/search" id="searchform" method="get"><div><input class="box" id="s" name="q" type="text" /><input name="sitesearch" type="hidden" value="http://MonadicT.github.io" /></div></form><h1><a href="/">MonadicT</a></h1></div><div id="content-wrap"><div id="content"><div id="post"><h2 class="page-title">Safeguarding Secrets with GnuPG</h2><p>
The best way to ensure that private information stays private is to
keep it all in your head and never divulge it unless tortured! That
ain't going to cut it in this day and age when we have more than a few
things to remember. The most common way is to use some kind of <b>data
safe</b> where information can be stored with some level of privacy.
</p>

<p>
Now, a disclaimer about this post and use of technology in securing
your secrets. There are many ways in which your private data could be
compromised. While the underlying math of cryptography seems foolproof
with technology we have now, a radically new approach, however
unlikely but not impossible, could render it vulnerable. But the good
news is that, we can trust the math. And the bad news?  We can never
trust the implementations. Cryptography implementations are plagued
with bugs which can go undetected for years. Many algorithms once
considered secure are now considered unfit. Your computer can be
bugged at the hardware level. There is a possibility that even a
computer not connected to the internet is vulnerable to eavesdropping.
</p>

<p>
With that said, let's now dive into some practical techniques to
protect our documents. The tool we will use is GnuPG which is an
implementation of <a href="http://www.openpgp.org/">OpenPGP</a> and <a href="http://tools.ietf.org/html/rfc4880">RFC 4080</a> . This is a good choice as it
is completely open source. In the world of security, an implementation
that is reviewed by people all over the world is more trustworthy than
a closed implementation where you would have to trust a corporation.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">GnuPG</h2>
<div class="outline-text-2" id="text-1">
<p>
In addition to encryption and decryption of documents, GnuPG can also
digitally sign and verify signatures. We won't be using those
capabilities here. GnuPG can encrypt documents using either symmetric
or asymmetric scheme. A symmetric scheme uses the same key to encrypt
and decrypt. An asymmetric scheme uses the public key to encrypt and
private key to decrypt. Asymmetric scheme allows anybody to
communicate securely with anyone whose public key is accessible.
</p>

<p>
For our purposes, we can use either scheme.
</p>
</div>

<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1">Installation</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Installation depends on the Linux distribution you are using. For
Debian/Ubuntu/Mint, the following incantation works.
</p>

<div class="org-src-container">

<pre class="src src-sh">sudo apt-get install gnupg
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2">Key generation</h3>
<div class="outline-text-3" id="text-1-2">
<p>
You need to generate a key using the following command. The command
asks a number of questions about the type of key (choose RSA &amp; RSA)
and identity to be associated with the key.
</p>

<div class="org-src-container">

<pre class="src src-clojure">gpg --gen-key
</pre>
</div>

<p>
The generated keys are stored in <code>~/.gnupg/</code>. It is a splendid idea to
keep copies of this directory. It's highly recommended to use a
passphrase and keep the copies in a safe and secure location. If you
lose these keys, there is no way to get them back! You have been
warned!
</p>
</div>
</div>
<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3">Encryption</h3>
<div class="outline-text-3" id="text-1-3">
<p>
<code>gpg</code> encrypts using the public key of a user. When you want to
encrypt a document which should be for your use, you simply use your
own user id as shown below. If you had used someone else as the
<i>recipient</i>, only that person would be able to decrypt what you
encrypt.
</p>

<div class="org-src-container">

<pre class="src src-sh">gpg --encrypt -r user@domain --output doc.gpg doc.txt
</pre>
</div>

<p>
This command writes the encrypted output to <code>gpg.txt</code>.
</p>
</div>
</div>
<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4">Decryption</h3>
<div class="outline-text-3" id="text-1-4">
<p>
A gpg-encrypted document is decrypted by the following
command. Decryption requires the private key of the user whose public
key was used as the encryption key. User can provide access to the key
either by entering the passphrase for the key or by running a
<code>gpg-agent</code> process to which key is made available.
</p>

<div class="org-src-container">

<pre class="src src-sh">gpg --decrypt foo.gpg
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">GnuPG in Emacs</h2>
<div class="outline-text-2" id="text-2">
<p>
The procedures described in the previous section get the job done. It
would be cumbersome to decrypt a document and then edit in an
editor. Luckily, Emacs users have built-in support for GnuPG (package
EasyPG). When Emacs detects an encrypted document, it will ask for
your passphrase and save the modified document encrypting it. Nothing
could be more convenient!
</p>

<p>
Another disclaimer here! Anytime you have an decrypted copy of your
precious document, you must be aware of the potential of it being
leaked. Editors could be keeping backup copies, processes could get
swapped to disk, someone could be remotely viewing your screen. Keep
all these risk in mind. A big part of security is a healthy dose of
paranoia and distrust of everything.
</p>
</div>
</div>
<div class="post-tags">Tags: <a href="/tags/#tip,">tip, </a><a href="/tags/#emacs">emacs </a></div></div><div id="related"><h3 class="random-posts">Random Posts</h3><ul class="posts"><li><span>25 Feb 2014</span><a href="/2014/02/25/Ubuntu-Network_trouble/">How to fix Wi-Fi connection issues in Ubuntu 13.04</a></li><li><span>23 Feb 2014</span><a href="/2014/02/23/rate-limited-fns/">core.async for throttling a Clojure function</a></li><li><span>08 Mar 2014</span><a href="/2014/03/08/safeguarding-secrets-with-gnupg/">Safeguarding Secrets with GnuPG</a></li><li><span>24 Jan 2014</span><a href="/2014/01/24/Java-References/">Java Reference Objects</a></li><li><span>26 Feb 2014</span><a href="/2014/02/26/JavaForkJoin/">Java Fork/Join Framework - an exemplar of elegant design</a></li></ul></div></div><div id="sidebar"><div style="border-bottom: solid 1px #ddd">PRAKI PRAKASH</div><div><img src="/images/praki.jpg" style="float:left;padding:
                                                .5em" />Maker, programmer, culinarian, but not necessarily in
      that order! Toiled at VMware, Yahoo, Westbridge and
      Arzoo. Recovering Java programmer, functional
      programming ideologue and Clojure practitioner. Maker of
      very thin wood shavings using antique hand
      tools. Inventor of delectable culinary chef d'Å“uvre!</div><div style="padding-top: 1em; padding-bottom:1em"><a href="//github.com/MonadicT" style="text-decoration:none;" target="_top"><img alt="Github" src="/images/GitHub-Mark-32px.png" style="border:0;width:16px;height:16px;" title="GitHub" /></a>&nbsp;&nbsp;<a href="//plus.google.com/106671634457466903954?prsrc=3" rel="publisher" style="text-decoration:none;" target="_top"><img alt="Google+" src="//ssl.gstatic.com/images/icons/gplus-32.png" style="border:0;width:16px;height:16px;" title="Google+" /></a>&nbsp;&nbsp;<a href="https://twitter.com/MonadicT"><img alt="Twitter" src="/images/Twitter_logo_blue.png" style="border:0;width:16px;height:16px" title="Twitter" /></a><a href="/rss-feed" id="rss-feed"><img height="24px" src="/images/rss.png" width="24px" /></a></div><a class="twitter-timeline" data-widget-id="438551614102577152" href="https://twitter.com/MonadicT/favorites">Favorite Tweets by @MonadicT</a><script type="text/javascript">function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','twitter-wjs');</script></div></div><div id="footer"><p>&copy; 2013-2014<a href="http://MonadicT.github.io"> Praki Prakash</a></p></div></body></div></html>